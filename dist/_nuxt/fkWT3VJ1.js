import{r as a,o as v,e as d,v as s,y as t,F as k,D as p,x as l,z as _}from"./C9gJKE_I.js";const f={key:0},m={key:1},S={__name:"index",setup(g){const e=a(null),n=a(!1),u=a([]);v(()=>{const c=`wss://${window.location.host}/api/socket`;e.value=new WebSocket(c),e.value.onopen=()=>{n.value=!0,console.log("WebSocket подключен")},e.value.onmessage=o=>{u.value.push(o.data),console.log("Сообщение от сервера:",o.data)},e.value.onerror=o=>{console.error("Ошибка WebSocket:",o)},e.value.onclose=()=>{n.value=!1,console.log("WebSocket отключен")}}),d(()=>{e.value&&e.value.close()});const i=()=>{e.value&&n.value&&e.value.send("Привет от клиента!")};return(c,o)=>(l(),s("div",null,[o[0]||(o[0]=t("h1",null,"WebSocket в Nuxt 3",-1)),n.value?(l(),s("p",f,"✅ Подключено")):(l(),s("p",m,"❌ Не подключено")),t("button",{onClick:i},"Отправить сообщение"),t("ul",null,[(l(!0),s(k,null,p(u.value,r=>(l(),s("li",{key:r},_(r),1))),128))])]))}};export{S as default};
